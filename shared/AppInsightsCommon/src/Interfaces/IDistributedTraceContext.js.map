{"version":3,"file":"IDistributedTraceContext.js","sourceRoot":"","sources":["IDistributedTraceContext.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,kCAAkC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { IW3cTraceState } from \"./IW3cTraceState\";\r\n\r\nexport interface IDistributedTraceContext {\r\n\r\n    /**\r\n     * Returns the current name of the page\r\n     */\r\n    getName(): string;\r\n\r\n    /**\r\n     * Sets the current name of the page, also updates the name for any parent context.\r\n     * This is used to identify the page in the telemetry data.\r\n     * @remarks This function updates the current and ALL parent contexts with the new name,\r\n     * to just update the name of the current context, use the `pageName` property.\r\n     * @param pageName - The name of the page\r\n     * @deprecated Use the `pageName` property to avoid the side effect of changing the page name of all\r\n     * parent contexts.\r\n     */\r\n    setName(pageName: string): void;\r\n\r\n    /**\r\n     * Returns the unique identifier for a trace. All requests / spans from the same trace share the same traceId.\r\n     * Must be read from incoming headers or generated according to the W3C TraceContext specification,\r\n     * in a hex representation of 16-byte array. A.k.a. trace-id, TraceID or Distributed TraceID\r\n     */\r\n    getTraceId(): string;\r\n\r\n    /**\r\n     * Set the unique identifier for a trace. All requests / spans from the same trace share the same traceId.\r\n     * Must be conform to the W3C TraceContext specification, in a hex representation of 16-byte array.\r\n     * A.k.a. trace-id, TraceID or Distributed TraceID https://www.w3.org/TR/trace-context/#trace-id\r\n     *\r\n     * @remarks Sets the traceId for the current context AND all parent contexts, if you want to set the traceId\r\n     * for the current context only, use the `traceId` property.\r\n     * @param newValue - The traceId to set\r\n     * @deprecated Use the `traceId` property to avoid the side effect of changing the traceId of all\r\n     * parent contexts.\r\n     */\r\n    setTraceId(newValue: string): void;\r\n\r\n    /**\r\n     * Self-generated 8-bytes identifier of the incoming request. Must be a hex representation of 8-byte array.\r\n     * Also know as the parentId, used to link requests together\r\n     */\r\n    getSpanId(): string;\r\n\r\n    /**\r\n     * Self-generated 8-bytes identifier of the incoming request. Must be a hex representation of 8-byte array.\r\n     * Also know as the parentId, used to link requests together\r\n     * https://www.w3.org/TR/trace-context/#parent-id\r\n     *\r\n     * @remarks Sets the spanId for the current context AND all parent contexts, if you want to set the spanId for\r\n     * the current context only, use the `spanId` property.\r\n     * @param newValue - The spanId to set\r\n     * @deprecated Use the `spanId` property to avoid the side effect of changing the spanId of all\r\n     * parent contexts.\r\n     */\r\n    setSpanId(newValue: string): void;\r\n\r\n    /**\r\n     * An integer representation of the W3C TraceContext trace-flags.\r\n     */\r\n    getTraceFlags(): number | undefined;\r\n\r\n    /**\r\n     * https://www.w3.org/TR/trace-context/#trace-flags\r\n     * @remarks Sets the trace flags for the current context and ALL  parent contexts, if you want to set the trace\r\n     * flags for the current context only, use the `traceFlags` property.\r\n     * @param newValue - An integer representation of the W3C TraceContext trace-flags.\r\n     * @deprecated Use the `traceFlags` property to avoid the side effect of changing the traceFlags of all\r\n     * parent contexts.\r\n     */\r\n    setTraceFlags(newValue?: number): void;\r\n\r\n    /**\r\n     * Returns the current name of the page\r\n     * @remarks This function updates the current context only, to update the name of the current and ALL parent contexts,\r\n     * use the `setName` method.\r\n     * @default undefined\r\n     * @since 3.4.0\r\n     */\r\n    pageName: string;\r\n\r\n    /**\r\n     * The current ID of the trace that this span belongs to. It is worldwide unique\r\n     * with practically sufficient probability by being made as 16 randomly\r\n     * generated bytes, encoded as a 32 lowercase hex characters corresponding to\r\n     * 128 bits.\r\n     * @remarks If you update this value, it will only update for the current context, not the parent context,\r\n     * if you need to update the current and ALL parent contexts, use the `setTraceId` method.\r\n     * @since 3.4.0\r\n     */\r\n    traceId: string;\r\n\r\n    /**\r\n     * The ID of the Span. It is globally unique with practically sufficient\r\n     * probability by being made as 8 randomly generated bytes, encoded as a 16\r\n     * lowercase hex characters corresponding to 64 bits.\r\n     * If you update this value, it will only update for the current context, not the parent context.\r\n     * @remarks If you update this value, it will only update for the current context, not the parent context,\r\n     * if you need to update the current and ALL parent contexts, use the `setSpanId` method.\r\n     * @since 3.4.0\r\n     */\r\n    spanId: string;\r\n\r\n    /**\r\n     * Returns true if the current context was initialized (propagated) from a remote parent.\r\n     * @since 3.4.0\r\n     * @default false\r\n     * @returns True if the context was propagated from a remote parent\r\n     */\r\n    readonly isRemote: boolean;\r\n\r\n    /**\r\n     * Trace flags to propagate.\r\n     *\r\n     * It is represented as 1 byte (bitmap). Bit to represent whether trace is\r\n     * sampled or not. When set, the least significant bit documents that the\r\n     * caller may have recorded trace data. A caller who does not record trace\r\n     * data out-of-band leaves this flag unset.\r\n     *\r\n     * see {@link eW3CTraceFlags} for valid flag values.\r\n     *\r\n     * @remarks If you update this value, it will only update for the current context, not the parent context,\r\n     * if you need to update the current and ALL parent contexts, use the `setTraceFlags` method.\r\n     * @since 3.4.0\r\n     */\r\n    traceFlags?: number;\r\n   \r\n    /**\r\n     * Returns the current trace state which will be used to propgate context across different services.\r\n     * Updating (adding / removing keys) of the trace state will modify the current context.\r\n     * @remarks Unlike the OpenTelemetry {@link TraceState}, this value is a mutable object, so you can\r\n     * modify it directly you do not need to reassign the new value to this property.\r\n     * @since 3.4.0\r\n     */\r\n    readonly traceState: IW3cTraceState;\r\n\r\n    /**\r\n     * Provides access to the parent context of the current context.\r\n     * @remarks This is a read-only property, you cannot modify the parent context directly, you can only\r\n     * modify the current context. If you need to modify the parent context, you need to do it through the\r\n     * current context using the `setTraceId`, `setSpanId`, `setTraceFlags` and `setName` methods.\r\n     * @default null\r\n     * @since 3.4.0\r\n     */\r\n    readonly parentCtx?: IDistributedTraceContext | null;\r\n}\r\n"]}