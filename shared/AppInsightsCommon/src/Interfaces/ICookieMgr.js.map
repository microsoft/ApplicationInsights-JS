{"version":3,"file":"ICookieMgr.js","sourceRoot":"","sources":["ICookieMgr.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,kCAAkC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { IPromise } from \"@nevware21/ts-async\";\r\nimport { ITelemetryUpdateState } from \"./ITelemetryUpdateState\";\r\n\r\nexport interface ICookieMgr {\r\n\r\n    /**\r\n     * Enable or Disable the usage of cookies\r\n     */\r\n    setEnabled(value: boolean): void;\r\n\r\n    /**\r\n     * Can the system use cookies, if this returns false then all cookie setting and access functions will return nothing\r\n     */\r\n    isEnabled(): boolean;\r\n\r\n    /**\r\n     * Set the named cookie with the value and optional domain and optional\r\n     * @param name - The name of the cookie\r\n     * @param value - The value of the cookie (Must already be encoded)\r\n     * @param maxAgeSec - [optional] The maximum number of SECONDS that this cookie should survive\r\n     * @param domain - [optional] The domain to set for the cookie\r\n     * @param path - [optional] Path to set for the cookie, if not supplied will default to \"/\"\r\n     * @returns - True if the cookie was set otherwise false (Because cookie usage is not enabled or available)\r\n     */\r\n    set(name: string, value: string, maxAgeSec?: number, domain?: string, path?: string): boolean;\r\n\r\n    /**\r\n     * Get the value of the named cookie\r\n     * @param name - The name of the cookie\r\n     */\r\n    get(name: string): string;\r\n\r\n    /**\r\n     * Delete/Remove the named cookie if cookie support is available and enabled.\r\n     * Note: Not using \"delete\" as the name because it's a reserved word which would cause issues on older browsers\r\n     * @param name - The name of the cookie\r\n     * @param path - [optional] Path to set for the cookie, if not supplied will default to \"/\"\r\n     * @returns - True if the cookie was marked for deletion otherwise false (Because cookie usage is not enabled or available)\r\n     */\r\n    del(name: string, path?: string): boolean;\r\n\r\n    /**\r\n     * Purge the cookie from the system if cookie support is available, this function ignores the enabled setting of the manager\r\n     * so any cookie will be removed.\r\n     * Note: Not using \"delete\" as the name because it's a reserved word which would cause issues on older browsers\r\n     * @param name - The name of the cookie\r\n     * @param path - [optional] Path to set for the cookie, if not supplied will default to \"/\"\r\n     * @returns - True if the cookie was marked for deletion otherwise false (Because cookie usage is not available)\r\n     */\r\n    purge(name: string, path?: string): boolean;\r\n\r\n    /**\r\n     * Optional Callback hook to allow the cookie manager to update it's configuration, not generally implemented now that\r\n     * dynamic configuration is supported\r\n     * @param updateState - The new configuration state to apply to the cookie manager\r\n     */\r\n    update?(updateState: ITelemetryUpdateState): void;\r\n\r\n    /**\r\n     * Unload and remove any state that this ICookieMgr may be holding, this is generally called when the\r\n     * owning SDK is being unloaded.\r\n     * @param isAsync - Can the unload be performed asynchronously (default)\r\n     * @returns If the unload occurs synchronously then nothing should be returned, if happening asynchronously then\r\n     * the function should return an [IPromise](https://nevware21.github.io/ts-async/typedoc/interfaces/IPromise.html)\r\n     * / Promise to allow any listeners to wait for the operation to complete.\r\n     */\r\n    unload?(isAsync?: boolean): void | IPromise<void>;\r\n}\r\n\r\n/**\r\n * Configuration definition for instance based cookie management configuration\r\n */\r\nexport interface ICookieMgrConfig {\r\n    /**\r\n     * Defaults to true, A boolean that indicates whether the use of cookies by the SDK is enabled by the current instance.\r\n     * If false, the instance of the SDK initialized by this configuration will not store or read any data from cookies\r\n     */\r\n    enabled?: boolean;\r\n\r\n    /**\r\n     * Custom cookie domain. This is helpful if you want to share Application Insights cookies across subdomains.\r\n     */\r\n    domain?: string;\r\n\r\n    /**\r\n     * Specifies the path to use for the cookie, defaults to '/'\r\n     */\r\n    path?: string;\r\n\r\n    /**\r\n     * Specify the cookie name(s) to be ignored, this will cause any matching cookie name to never be read or written.\r\n     * They may still be explicitly purged or deleted. You do not need to repeat the name in the `blockedCookies`\r\n     * configuration.(Since v2.8.8)\r\n     */\r\n    ignoreCookies?: string[];\r\n\r\n    /**\r\n     * Specify the cookie name(s) to never be written, this will cause any cookie name to never be created or updated,\r\n     * they will still be read unless also included in the ignoreCookies and may still be explicitly purged or deleted.\r\n     * If not provided defaults to the same list provided in ignoreCookies. (Since v2.8.8)\r\n     */\r\n    blockedCookies?: string[];\r\n\r\n    /**\r\n     * Hook function to fetch the named cookie value.\r\n     * @param name - The name of the cookie\r\n     */\r\n    getCookie?: (name: string) => string;\r\n\r\n    /**\r\n     * Hook function to set the named cookie with the specified value.\r\n     * @param name - The name of the cookie\r\n     * @param value - The value to set for the cookie\r\n     */\r\n    setCookie?: (name: string, value: string) => void;\r\n\r\n    /**\r\n     * Hook function to delete the named cookie with the specified value, separated from\r\n     * setCookie to avoid the need to parse the value to determine whether the cookie is being\r\n     * added or removed.\r\n     * @param name - The name of the cookie\r\n     * @param cookieValue - The value to set to expire the cookie\r\n     */\r\n    delCookie?: (name: string, cookieValue: string) => void;\r\n\r\n    /**\r\n     * Defaults to false, when true this will disable the deferral behavior that occurs when cookies are disabled,\r\n     * reverting to the previous behavior where cookie operations would simply return false when cookies are disabled.\r\n     * This is provided to maintain backward compatibility if applications depend on the previous behavior.\r\n     * When false (default), cookie operations are deferred until cookies are enabled, supporting consent scenarios.\r\n     * @since v3.3.10\r\n     */\r\n    disableCookieDefer?: boolean;\r\n}"]}