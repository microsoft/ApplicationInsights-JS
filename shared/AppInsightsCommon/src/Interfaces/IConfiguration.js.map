{"version":3,"file":"IConfiguration.js","sourceRoot":"","sources":["IConfiguration.ts"],"names":[],"mappings":";AA4QA,KAAK;AACL,uCAAuC;AACvC,cAAc;AACd,KAAK;AACL,8CAA8C;AAC9C,SAAS;AACT,6CAA6C;AAC7C,kBAAkB;AAClB,SAAS;AACT,+BAA+B;AAC/B,GAAG","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { IPromise } from \"@nevware21/ts-async\";\r\nimport { eTraceHeadersMode } from \"../Enums/TraceHeadersMode\";\r\nimport { IAppInsightsCore } from \"./IAppInsightsCore\";\r\nimport { IChannelControls } from \"./IChannelControls\";\r\nimport { ICookieMgrConfig } from \"./ICookieMgr\";\r\nimport { IExceptionConfig } from \"./IExceptionConfig\";\r\nimport { IFeatureOptIn } from \"./IFeatureOptIn\";\r\nimport { INotificationManager } from \"./INotificationManager\";\r\nimport { IPerfManager } from \"./IPerfManager\";\r\nimport { ITelemetryPlugin } from \"./ITelemetryPlugin\";\r\n\r\n/**\r\n * Configuration provided to SDK core\r\n */\r\nexport interface IConfiguration {\r\n    /**\r\n     * Instrumentation key of resource. Either this or connectionString must be specified.\r\n     */\r\n    instrumentationKey?: string| IPromise<string>;\r\n\r\n    /**\r\n     * Connection string of resource. Either this or instrumentationKey must be specified.\r\n     */\r\n    connectionString?: string | IPromise<string> ;\r\n\r\n    /**\r\n     * Set the timer interval (in ms) for internal logging queue, this is the\r\n     * amount of time to wait after logger.queue messages are detected to be sent.\r\n     * Note: since 3.0.1 and 2.8.13 the diagnostic logger timer is a normal timeout timer\r\n     * and not an interval timer. So this now represents the timer \"delay\" and not\r\n     * the frequency at which the events are sent.\r\n     */\r\n    diagnosticLogInterval?: number;\r\n\r\n    /**\r\n     * Maximum number of iKey transmitted logging telemetry per page view\r\n     */\r\n    maxMessageLimit?: number;\r\n\r\n    /**\r\n     * Console logging level. All logs with a severity level higher\r\n     * than the configured level will be printed to console. Otherwise\r\n     * they are suppressed. ie Level 2 will print both CRITICAL and\r\n     * WARNING logs to console, level 1 prints only CRITICAL.\r\n     *\r\n     * Note: Logs sent as telemetry to instrumentation key will also\r\n     * be logged to console if their severity meets the configured loggingConsoleLevel\r\n     *\r\n     * 0: ALL console logging off\r\n     * 1: logs to console: severity \\>= CRITICAL\r\n     * 2: logs to console: severity \\>= WARNING\r\n     */\r\n    loggingLevelConsole?: number;\r\n\r\n    /**\r\n     * Telemtry logging level to instrumentation key. All logs with a severity\r\n     * level higher than the configured level will sent as telemetry data to\r\n     * the configured instrumentation key.\r\n     *\r\n     * 0: ALL iKey logging off\r\n     * 1: logs to iKey: severity \\>= CRITICAL\r\n     * 2: logs to iKey: severity \\>= WARNING\r\n     */\r\n    loggingLevelTelemetry?: number\r\n\r\n    /**\r\n     * If enabled, uncaught exceptions will be thrown to help with debugging\r\n     */\r\n    enableDebug?: boolean;\r\n\r\n    /**\r\n     * Endpoint where telemetry data is sent\r\n     */\r\n    endpointUrl?: string | IPromise<string>;\r\n\r\n    /**\r\n     * Extension configs loaded in SDK\r\n     */\r\n    extensionConfig?: { [key: string]: any }; // extension configs;\r\n\r\n    /**\r\n     * Additional plugins that should be loaded by core at runtime\r\n     */\r\n    readonly extensions?: ITelemetryPlugin[];\r\n\r\n    /**\r\n     * Channel queues that is setup by caller in desired order.\r\n     * If channels are provided here, core will ignore any channels that are already setup, example if there is a SKU with an initialized channel\r\n     */\r\n    readonly channels?: IChannelControls[][];\r\n\r\n    /**\r\n     * Flag that disables the Instrumentation Key validation.\r\n     */\r\n    disableInstrumentationKeyValidation?: boolean;\r\n    \r\n    /**\r\n     * [Optional] When enabled this will create local perfEvents based on sections of the code that have been instrumented\r\n     * to emit perfEvents (via the doPerf()) when this is enabled. This can be used to identify performance issues within\r\n     * the SDK, the way you are using it or optionally your own instrumented code.\r\n     * The provided IPerfManager implementation does NOT send any additional telemetry events to the server it will only fire\r\n     * the new perfEvent() on the INotificationManager which you can listen to.\r\n     * This also does not use the window.performance API, so it will work in environments where this API is not supported.\r\n     */\r\n    enablePerfMgr?: boolean;\r\n\r\n    /**\r\n     * [Optional] Callback function that will be called to create a the IPerfManager instance when required and `enablePerfMgr`\r\n     * is enabled, this enables you to override the default creation of a PerfManager() without needing to `setPerfMgr()`\r\n     * after initialization.\r\n     */\r\n    createPerfMgr?: (core: IAppInsightsCore, notificationManager: INotificationManager) => IPerfManager;\r\n\r\n    /**\r\n     * [Optional] Fire every single performance event not just the top level root performance event. Defaults to false.\r\n     */\r\n    perfEvtsSendAll?: boolean;\r\n\r\n    /**\r\n     * [Optional] Identifies the default length used to generate random session and user id's if non currently exists for the user / session.\r\n     * Defaults to 22, previous default value was 5, if you need to keep the previous maximum length you should set this value to 5.\r\n     */\r\n    idLength?: number;\r\n\r\n    /**\r\n     * @description Custom cookie domain. This is helpful if you want to share Application Insights cookies across subdomains. It\r\n     * can be set here or as part of the cookieCfg.domain, the cookieCfg takes precedence if both are specified.\r\n     * @defaultValue \"\"\r\n     */\r\n    cookieDomain?: string;\r\n\r\n    /**\r\n     * @description Custom cookie path. This is helpful if you want to share Application Insights cookies behind an application\r\n     * gateway. It can be set here or as part of the cookieCfg.domain, the cookieCfg takes precedence if both are specified.\r\n     * @defaultValue \"\"\r\n     */\r\n    cookiePath?: string;\r\n\r\n    /**\r\n     * [Optional] A boolean that indicated whether to disable the use of cookies by the SDK. If true, the SDK will not store or\r\n     * read any data from cookies. Cookie usage can be re-enabled after initialization via the core.getCookieMgr().enable().\r\n     */\r\n    disableCookiesUsage?: boolean;\r\n\r\n    /**\r\n     * [Optional] A Cookie Manager configuration which includes hooks to allow interception of the get, set and delete cookie\r\n     * operations. If this configuration is specified any specified enabled and domain properties will take precedence over the\r\n     * cookieDomain and disableCookiesUsage values.\r\n     */\r\n    cookieCfg?: ICookieMgrConfig;\r\n\r\n    /**\r\n     * [Optional] An array of the page unload events that you would like to be ignored, special note there must be at least one valid unload\r\n     * event hooked, if you list all or the runtime environment only supports a listed \"disabled\" event it will still be hooked, if required by the SDK.\r\n     * Unload events include \"beforeunload\", \"unload\", \"visibilitychange\" (with 'hidden' state) and \"pagehide\".\r\n     *\r\n     * This can be used to avoid jQuery 3.7.1+ deprecation warnings and Chrome warnings about the unload event:\r\n     * @example\r\n     * ```javascript\r\n     * {\r\n     *   disablePageUnloadEvents: [\"unload\"]\r\n     * }\r\n     * ```\r\n     *\r\n     * For more details, see the [Page Unload Events documentation](https://microsoft.github.io/ApplicationInsights-JS/PageUnloadEvents.html).\r\n     */\r\n    disablePageUnloadEvents?: string[];\r\n\r\n    /**\r\n     * [Optional] An array of page show events that you would like to be ignored, special note there must be at lease one valid show event\r\n     * hooked, if you list all or the runtime environment only supports a listed (disabled) event it will STILL be hooked, if required by the SDK.\r\n     * Page Show events include \"pageshow\" and \"visibilitychange\" (with 'visible' state).\r\n     *\r\n     * @example\r\n     * ```javascript\r\n     * {\r\n     *   disablePageShowEvents: [\"pageshow\"]\r\n     * }\r\n     * ```\r\n     *\r\n     * For more details, see the [Page Unload Events documentation](https://microsoft.github.io/ApplicationInsights-JS/PageUnloadEvents.html).\r\n     */\r\n    disablePageShowEvents?: string[];\r\n\r\n    /**\r\n     * [Optional] A flag for performance optimization to disable attempting to use the Chrome Debug Extension, if disabled and the extension is installed\r\n     * this will not send any notifications.\r\n     */\r\n    disableDbgExt?: boolean;\r\n\r\n    /**\r\n     * Add \"&w=0\" parameter to support UA Parsing when web-workers don't have access to Document.\r\n     * Default is false\r\n     */\r\n    enableWParam?: boolean;\r\n\r\n     /**\r\n     * Custom optional value that will be added as a prefix for storage name.\r\n     * @defaultValue undefined\r\n     */\r\n    storagePrefix?:string;\r\n\r\n    /**\r\n     * Custom optional value to opt in features\r\n     * @defaultValue undefined\r\n     */\r\n    featureOptIn?: IFeatureOptIn;\r\n\r\n    /**\r\n     * If your connection string, instrumentation key and endpoint url are promises,\r\n     * this config is to manually set timeout for those promises.\r\n     * Default: 50000ms\r\n     * @since 3.3.0\r\n     */\r\n    initTimeOut?: number;\r\n\r\n    /**\r\n     * If your connection string, instrumentation key and endpoint url are promises,\r\n     * this config is to manually set in memory proxy track calls count limit before promises finished.\r\n     * Default: 100\r\n     * @since 3.3.0\r\n     */\r\n    initInMemoMaxSize?: number;\r\n\r\n    /**\r\n     * [Optional] Set additional configuration for exceptions, such as more scripts to include in the exception telemetry.\r\n     * @since 3.3.2\r\n     */\r\n    expCfg?: IExceptionConfig;\r\n\r\n    /**\r\n     * [Optional] A flag to enable or disable the use of the field redaction for urls.\r\n     * @defaultValue true\r\n     */\r\n    redactUrls?: boolean;\r\n\r\n    /**\r\n     * [Optional] Additional query parameters to redact beyond the default set.\r\n     * Use this to specify custom parameters that contain sensitive information.\r\n     * These will be combined with the default parameters that are redacted.\r\n     * @defaultValue [\"sig\", \"Signature\", \"AWSAccessKeyId\", \"X-Goog-Signature\"]\r\n     * @example [\"sig\", \"Signature\", \"AWSAccessKeyId\", \"X-Goog-Signature\",\"auth_token\", \"api_key\", \"private_data\"]\r\n     */\r\n    redactQueryParams?: string[];\r\n\r\n    ///**\r\n    // * [Optional] Internal SDK configuration for developers\r\n    // * @internal\r\n    // */\r\n    //_sdk?: IInternalSdkConfiguration;\r\n\r\n    /**\r\n     * [Optional] Controls if the SDK should look for the `traceparent` and/or `tracestate` values from\r\n     * the service timing headers or meta tags from the initial page load.\r\n     * @defaultValue eTraceHeadersMode.All\r\n     */\r\n    traceHdrMode?: eTraceHeadersMode;\r\n\r\n    // TODO: Add IOTelConfig type back\r\n    /**\r\n     * [Optional] OpenTelemetry specific configuration\r\n     * @since 4.0.0\r\n     */\r\n    otelCfg?: any\r\n}\r\n\r\n///**\r\n// * Internal SDK configuration options\r\n// * @internal\r\n// */\r\n//export interface IInternalSdkConfiguration {\r\n//    /**\r\n//     * [Optional] Enable Internal StatsBeat\r\n//     * @internal\r\n//     */\r\n//    stats?: IStatsBeatConfig;\r\n//}\r\n"]}