{"version":3,"file":"CoreUtils.js","sourceRoot":"","sources":["CoreUtils.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\"use strict\";\r\nimport { strShimUndefined } from \"@microsoft/applicationinsights-shims\";\r\nimport { strSubstr, strSubstring } from \"@nevware21/ts-utils\";\r\nimport { STR_EMPTY } from \"../InternalConstants\";\r\nimport { random32 } from \"./RandomHelper\";\r\n\r\n// Added to help with minfication\r\nexport const Undefined = strShimUndefined;\r\n\r\nexport function newGuid(): string {\r\n    const uuid = generateW3CId();\r\n\r\n    return strSubstring(uuid, 0, 8) + \"-\" + strSubstring(uuid, 8, 12) + \"-\" + strSubstring(uuid, 12, 16) + \"-\" + strSubstring(uuid, 16, 20) + \"-\" + strSubstring(uuid, 20);\r\n}\r\n\r\n/**\r\n * The strEndsWith() method determines whether a string ends with the characters of a specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param search - The characters to be searched for at the end of the value.\r\n * @returns true if the given search value is found at the end of the string, otherwise false.\r\n */\r\nexport function strEndsWith(value: string, search: string) {\r\n    if (value && search) {\r\n        let len = value.length;\r\n        let start = len - search.length;\r\n        return strSubstring(value, start >= 0 ? start : 0, len) === search;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n/**\r\n * generate W3C trace id\r\n */\r\nexport function generateW3CId(): string {\r\n    const hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n\r\n    // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n    let oct = STR_EMPTY, tmp;\r\n    for (let a = 0; a < 4; a++) {\r\n        tmp = random32();\r\n        oct +=\r\n            hexValues[tmp & 0xF] +\r\n            hexValues[tmp >> 4 & 0xF] +\r\n            hexValues[tmp >> 8 & 0xF] +\r\n            hexValues[tmp >> 12 & 0xF] +\r\n            hexValues[tmp >> 16 & 0xF] +\r\n            hexValues[tmp >> 20 & 0xF] +\r\n            hexValues[tmp >> 24 & 0xF] +\r\n            hexValues[tmp >> 28 & 0xF];\r\n    }\r\n\r\n    // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n    const clockSequenceHi = hexValues[8 + (random32() & 0x03) | 0];\r\n    return strSubstr(oct, 0, 8) + strSubstr(oct, 9, 4) + \"4\" + strSubstr(oct, 13, 3) + clockSequenceHi +strSubstr(oct, 16, 3) + strSubstr(oct, 19, 12);\r\n}\r\n"]}