{"version":3,"file":"EnvUtils.js","sourceRoot":"","sources":["EnvUtils.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\"use strict\";\r\n\r\nimport { getGlobal, strShimObject, strShimPrototype, strShimUndefined } from \"@microsoft/applicationinsights-shims\";\r\nimport {\r\n    arrForEach, getDocument, getInst, getNavigator, getPerformance, hasNavigator, isFunction, isNullOrUndefined, isString, isUndefined,\r\n    mathMax, strContains, strIndexOf, strSubstring\r\n} from \"@nevware21/ts-utils\";\r\nimport { IConfiguration } from \"../Interfaces/IConfiguration\";\r\nimport { DEFAULT_SENSITIVE_PARAMS, STR_EMPTY, STR_REDACTED } from \"../InternalConstants\";\r\n\r\n// TypeScript removed this interface so we need to declare the global so we can check for it's existence.\r\ndeclare var XDomainRequest: any;\r\n\r\n/**\r\n * This file exists to hold environment utilities that are required to check and\r\n * validate the current operating environment. Unless otherwise required, please\r\n * only use defined methods (functions) in this class so that users of these\r\n * functions/properties only need to include those that are used within their own modules.\r\n */\r\n\r\nconst strDocumentMode = \"documentMode\";\r\nconst strLocation = \"location\";\r\nconst strConsole = \"console\";\r\nconst strJSON = \"JSON\";\r\nconst strCrypto = \"crypto\";\r\nconst strMsCrypto = \"msCrypto\";\r\nconst strReactNative = \"ReactNative\";\r\nconst strMsie = \"msie\";\r\nconst strTrident = \"trident/\";\r\nconst strXMLHttpRequest = \"XMLHttpRequest\";\r\n\r\nlet _isTrident: boolean = null;\r\nlet _navUserAgentCheck: string = null;\r\nlet _enableMocks = false;\r\nlet _useXDomainRequest: boolean | null = null;\r\nlet _beaconsSupported: boolean | null = null;\r\n\r\nfunction _hasProperty(theClass: any, property: string) {\r\n    let supported = false;\r\n    if (theClass) {\r\n        try {\r\n            supported = property in theClass;\r\n            if (!supported) {\r\n                let proto = theClass[strShimPrototype];\r\n                if (proto) {\r\n                    supported = property in proto;\r\n                }\r\n            }\r\n        } catch (e) {\r\n            // Do Nothing\r\n        }\r\n\r\n        if (!supported) {\r\n            try {\r\n                let tmp = new theClass();\r\n                supported = !isUndefined(tmp[property]);\r\n            } catch (e) {\r\n                // Do Nothing\r\n            }\r\n        }\r\n    }\r\n\r\n    return supported;\r\n}\r\n\r\n/**\r\n * Enable the lookup of test mock objects if requested\r\n * @param enabled - A flag to enable or disable the mock\r\n */\r\nexport function setEnableEnvMocks(enabled: boolean) {\r\n    _enableMocks = enabled;\r\n}\r\n\r\n/**\r\n * Returns the global location object if it is present otherwise null.\r\n * This helper is used to access the location object without causing an exception\r\n * \"Uncaught ReferenceError: location is not defined\"\r\n */\r\nexport function getLocation(checkForMock?: boolean): Location | null {\r\n    if (checkForMock && _enableMocks) {\r\n        let mockLocation = getInst(\"__mockLocation\") as Location;\r\n        if (mockLocation) {\r\n            return mockLocation;\r\n        }\r\n    }\r\n\r\n    if (typeof location === strShimObject && location) {\r\n        return location;\r\n    }\r\n\r\n    return getInst(strLocation);\r\n}\r\n\r\n/**\r\n * Returns the global console object\r\n */\r\nexport function getConsole(): Console | null {\r\n    if (typeof console !== strShimUndefined) {\r\n        return console;\r\n    }\r\n\r\n    return getInst(strConsole);\r\n}\r\n\r\n/**\r\n * Checks if JSON object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a history\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: JSON is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasJSON(): boolean {\r\n    return Boolean((typeof JSON === strShimObject && JSON) || getInst(strJSON) !== null);\r\n}\r\n\r\n/**\r\n * Returns the global JSON object if it is present otherwise null.\r\n * This helper is used to access the JSON object without causing an exception\r\n * \"Uncaught ReferenceError: JSON is not defined\"\r\n */\r\nexport function getJSON(): JSON | null {\r\n    if (hasJSON()) {\r\n        return JSON || getInst(strJSON);\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getCrypto(): Crypto | null {\r\n    return getInst(strCrypto);\r\n}\r\n\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getMsCrypto(): Crypto | null {\r\n    return getInst(strMsCrypto);\r\n}\r\n\r\n/**\r\n * Returns whether the environment is reporting that we are running in a React Native Environment\r\n */\r\nexport function isReactNative(): boolean {\r\n    // If running in React Native, navigator.product will be populated\r\n    var nav = getNavigator();\r\n    if (nav && nav.product) {\r\n        return nav.product === strReactNative;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n/**\r\n * Identifies whether the current environment appears to be IE\r\n */\r\nexport function isIE() {\r\n    let nav = getNavigator();\r\n    if (nav && (nav.userAgent !== _navUserAgentCheck || _isTrident === null)) {\r\n        // Added to support test mocking of the user agent\r\n        _navUserAgentCheck = nav.userAgent;\r\n        let userAgent = (_navUserAgentCheck || STR_EMPTY).toLowerCase();\r\n        _isTrident = (strContains(userAgent, strMsie) || strContains(userAgent, strTrident));\r\n    }\r\n\r\n    return _isTrident;\r\n}\r\n\r\n/**\r\n * Gets IE version returning the document emulation mode if we are running on IE, or null otherwise\r\n */\r\nexport function getIEVersion(userAgentStr: string = null): number {\r\n    if (!userAgentStr) {\r\n        let navigator = getNavigator() || ({} as Navigator);\r\n        userAgentStr = navigator ? (navigator.userAgent || STR_EMPTY).toLowerCase() : STR_EMPTY;\r\n    }\r\n\r\n    var ua = (userAgentStr || STR_EMPTY).toLowerCase();\r\n    // Also check for documentMode in case X-UA-Compatible meta tag was included in HTML.\r\n    if (strContains(ua, strMsie)) {\r\n        let doc = getDocument() || {} as Document;\r\n        return mathMax(parseInt(ua.split(strMsie)[1]), (doc[strDocumentMode] || 0));\r\n    } else if (strContains(ua, strTrident)) {\r\n        let tridentVer = parseInt(ua.split(strTrident)[1]);\r\n        if (tridentVer) {\r\n            return tridentVer + 4;\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nexport function isSafari(userAgentStr ?: string) {\r\n    if (!userAgentStr || !isString(userAgentStr)) {\r\n        let navigator = getNavigator() || ({} as Navigator);\r\n        userAgentStr = navigator ? (navigator.userAgent || STR_EMPTY).toLowerCase() : STR_EMPTY;\r\n    }\r\n\r\n    var ua = (userAgentStr || STR_EMPTY).toLowerCase();\r\n    return (strIndexOf(ua, \"safari\") >= 0);\r\n}\r\n\r\n/**\r\n * Checks if HTML5 Beacons are supported in the current environment.\r\n * @param useCached - [Optional] used for testing to bypass the cached lookup, when `true` this will\r\n * cause the cached global to be reset.\r\n * @returns True if supported, false otherwise.\r\n */\r\nexport function isBeaconsSupported(useCached?: boolean): boolean {\r\n    if (_beaconsSupported === null || useCached === false) {\r\n        _beaconsSupported = hasNavigator() && Boolean(getNavigator().sendBeacon);\r\n    }\r\n\r\n    return _beaconsSupported;\r\n}\r\n\r\n/**\r\n * Checks if the Fetch API is supported in the current environment.\r\n * @param withKeepAlive - [Optional] If True, check if fetch is available and it supports the keepalive feature, otherwise only check if fetch is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isFetchSupported(withKeepAlive?: boolean): boolean {\r\n    let isSupported = false;\r\n    try {\r\n        isSupported = !!getInst(\"fetch\");\r\n        const request = getInst(\"Request\");\r\n        if (isSupported && withKeepAlive && request) {\r\n            isSupported = _hasProperty(request, \"keepalive\");\r\n        }\r\n    } catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n\r\n    return isSupported;\r\n}\r\n\r\nexport function useXDomainRequest(): boolean | undefined {\r\n    if (_useXDomainRequest === null) {\r\n        _useXDomainRequest = (typeof XDomainRequest !== strShimUndefined);\r\n        if (_useXDomainRequest && isXhrSupported()) {\r\n            _useXDomainRequest = _useXDomainRequest && !_hasProperty(getInst(strXMLHttpRequest), \"withCredentials\");\r\n        }\r\n    }\r\n\r\n    return _useXDomainRequest;\r\n}\r\n\r\n/**\r\n * Checks if XMLHttpRequest is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isXhrSupported(): boolean {\r\n    let isSupported = false;\r\n    try {\r\n        const xmlHttpRequest = getInst(strXMLHttpRequest);\r\n        isSupported = !!xmlHttpRequest;\r\n    } catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n\r\n    return isSupported;\r\n}\r\n\r\n\r\nfunction _getNamedValue<T>(values: any, name: string): T[] {\r\n    let items: T[]  = [];\r\n    if (values) {\r\n        arrForEach(values, (value) => {\r\n            if (value.name) {\r\n                if(value.name === name) {\r\n                    items.push(value);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return items;\r\n}\r\n\r\n/**\r\n * Helper function to fetch the named meta-tag from the page.\r\n * @param name - The name of the meta-tag to find.\r\n */\r\nexport function findMetaTag(name: string): any {\r\n    let tags = findMetaTags(name);\r\n    if (tags.length > 0) {\r\n        return tags[0];\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * Helper function to fetch all named meta-tag from the page.\r\n * @since 3.4.0\r\n * @param name - The name of the meta-tag to find.\r\n * @returns - An array of meta-tag values.\r\n */\r\nexport function findMetaTags(name: string): string[] {\r\n    let tags: string[] = [];\r\n    let doc = getDocument();\r\n    if (doc && name) {\r\n        // Look for a meta-tag\r\n        arrForEach(_getNamedValue<any>(doc.querySelectorAll(\"meta\"), name), (item) => {\r\n            tags.push(item.content);\r\n        });\r\n    }\r\n\r\n    return tags;\r\n}\r\n\r\n/**\r\n * Helper function to fetch the named server timing value from the page response (first navigation event).\r\n * @param name - The name of the server timing value to find.\r\n */\r\nexport function findNamedServerTiming(name: string): any {\r\n    let value: any;\r\n    let serverTimings = findNamedServerTimings(name);\r\n    if (serverTimings.length > 0) {\r\n        value = serverTimings[0];\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n/**\r\n * Helper function to fetch the named server timing value from the page response (first navigation event).\r\n * @since 3.4.0\r\n * @param name - The name of the server timing value to find.\r\n * @returns - An array of server timing values.\r\n */\r\nexport function findNamedServerTimings(name: string): string[] {\r\n    let values: string[] = [];\r\n    let perf = getPerformance();\r\n    if (perf && perf.getEntriesByType) {\r\n        // Try looking for a server-timing header\r\n        arrForEach(perf.getEntriesByType(\"navigation\") || [], (navPerf: any) => {\r\n            arrForEach(_getNamedValue(navPerf.serverTiming, name), (value: any) => {\r\n                let desc = value.description;\r\n                if (!isNullOrUndefined(desc)) {\r\n                    values.push(desc);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    return values;\r\n}\r\n\r\n// TODO: should reuse this method for analytics plugin\r\nexport function dispatchEvent(target:EventTarget, evnt: Event | CustomEvent): boolean {\r\n    if (target && target.dispatchEvent && evnt) {\r\n        target.dispatchEvent(evnt);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n\r\nexport function createCustomDomEvent(eventName: string, details?: any): CustomEvent {\r\n    let event: CustomEvent = null;\r\n    let detail = {detail: details || null } as CustomEventInit;\r\n    if (isFunction(CustomEvent)) { // Use CustomEvent constructor when available\r\n        event = new CustomEvent(eventName, detail);\r\n    } else { // CustomEvent has no constructor in IE\r\n        let doc = getDocument();\r\n        if (doc && doc.createEvent) {\r\n            event = doc.createEvent(\"CustomEvent\");\r\n            event.initCustomEvent(eventName, true, true, detail);\r\n        }\r\n    }\r\n\r\n    return event;\r\n}\r\n\r\n\r\n\r\nexport function sendCustomEvent(evtName: string, cfg?: any, customDetails?: any): boolean {\r\n    let global = getGlobal();\r\n    if (global && (global as any).CustomEvent) {\r\n        try {\r\n            let details = {cfg: cfg || null,  customDetails: customDetails || null} as any;\r\n            return dispatchEvent(global, createCustomDomEvent(evtName, details));\r\n        } catch(e) {\r\n            // eslint-disable-next-line no-empty\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Redacts user information from a URL\r\n * @param url - The URL string to redact\r\n * @returns The URL with user information redacted\r\n */\r\nfunction redactUserInfo(url: string): string {\r\n    return url.replace(/^([a-zA-Z][a-zA-Z0-9+.-]*:\\/\\/)([^:@]{1,200}):([^@]{1,200})@(.*)$/, \"$1REDACTED:REDACTED@$4\");\r\n}\r\n\r\n/**\r\n * Redacts sensitive query parameters from a URL\r\n * @param url - The URL string to redact\r\n * @returns The URL with sensitive query parameters redacted\r\n */\r\nfunction redactQueryParameters(url: string, config?: IConfiguration): string {\r\n    let sensitiveParams: string[];\r\n    const questionMarkIndex = strIndexOf(url, \"?\");\r\n    if (questionMarkIndex === -1) {\r\n        return url;\r\n    }\r\n\r\n    if (config && config.redactQueryParams) {\r\n        sensitiveParams = DEFAULT_SENSITIVE_PARAMS.concat(config.redactQueryParams);\r\n    } else {\r\n        sensitiveParams = DEFAULT_SENSITIVE_PARAMS;\r\n    }\r\n\r\n    const baseUrl = strSubstring(url, 0, questionMarkIndex + 1);\r\n    let queryString = strSubstring(url, questionMarkIndex + 1);\r\n\r\n    let fragment = STR_EMPTY;\r\n    const hashIndex = strIndexOf(queryString, \"#\");\r\n    if (hashIndex !== -1) {\r\n        fragment = strSubstring(queryString, hashIndex);\r\n        queryString = strSubstring(queryString, 0, hashIndex);\r\n    }\r\n\r\n    let hasPotentialSensitiveParam = false;\r\n    for (let i = 0; i < sensitiveParams.length; i++) {\r\n        const paramCheck = sensitiveParams[i] + \"=\";\r\n        if (strIndexOf(queryString, paramCheck) !== -1) {\r\n            hasPotentialSensitiveParam = true;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (!hasPotentialSensitiveParam) {\r\n        return url;\r\n    }\r\n\r\n    const resultParts: string[] = [];\r\n    let anyParamRedacted = false;\r\n\r\n    if (queryString && queryString.length) {\r\n        const pairs = queryString.split(\"&\");\r\n        for (let i = 0; i < pairs.length; i++) {\r\n            const pair = pairs[i];\r\n            if (!pair) {\r\n                continue;\r\n            }\r\n            \r\n            const equalsIndex = strIndexOf(pair, \"=\");\r\n            if (equalsIndex === -1) {\r\n                // Parameter without value\r\n                resultParts.push(pair);\r\n            } else {\r\n                const paramName = pair.substring(0, equalsIndex);\r\n                const paramValue = pair.substring(equalsIndex + 1);\r\n                if (paramValue === STR_EMPTY) {\r\n                    resultParts.push(pair);\r\n                } else {\r\n                    let shouldRedact = false;\r\n                    for (let j = 0; j < sensitiveParams.length; j++) {\r\n                        if (paramName === sensitiveParams[j]) {\r\n                            shouldRedact = true;\r\n                            anyParamRedacted = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    \r\n                    if (shouldRedact) {\r\n                        resultParts.push(paramName + \"=\" + STR_REDACTED);\r\n                    } else {\r\n                        resultParts.push(pair);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    // If no parameters were redacted, return the original URL\r\n    if (!anyParamRedacted) {\r\n        return url;\r\n    }\r\n\r\n    return baseUrl + resultParts.join(\"&\") + fragment;\r\n}\r\n\r\n/**\r\n * Redacts sensitive information from a URL string, including credentials and specific query parameters.\r\n * @param input - The URL string to be redacted.\r\n * @param config - Configuration object that contain redactUrls setting.\r\n * @returns The redacted URL string or the original string if no redaction was needed or possible.\r\n */\r\nexport function fieldRedaction(input: string, config: IConfiguration): string {\r\n    if (!input || input.indexOf(\" \") !== -1) {\r\n        return input;\r\n    }\r\n    const isRedactionDisabled = config && config.redactUrls === false;\r\n    if (isRedactionDisabled) {\r\n        return input;\r\n    }\r\n    const hasCredentials = strIndexOf(input, \"@\") !== -1;\r\n    const hasQueryParams = strIndexOf(input, \"?\") !== -1;\r\n    \r\n    // If no credentials and no query params, return original\r\n    if (!hasCredentials && !hasQueryParams) {\r\n        return input;\r\n    }\r\n    try {\r\n        let result = input;\r\n        if (hasCredentials) {\r\n            result = redactUserInfo(input);\r\n        }\r\n        if (hasQueryParams) {\r\n            result = redactQueryParameters(result, config);\r\n        }\r\n        return result;\r\n    } catch (e) {\r\n        return input;\r\n    }\r\n}\r\n"]}